<!DOCTYPE html>
<html>
  <head>
    <title>Introduction to piping</title>
    <meta charset="utf-8">
    <meta name="author" content="Suzan Baert" />
    <link href="libs/remark-css-0.0.1/example.css" rel="stylesheet" />
    <link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introduction to piping
### Suzan Baert
### 25/01/2018

---


## What is piping?

When you want to wrangle a large dataframe, you have a few options

- 1. Nest a lot of functions
  
  
  


```r
pizza &lt;- take_out(put_in(dress_with(dress_with
        (dress_with(pie, sauce), oil), cheese), oven), oven)
```

.footnote[
*I found this example on a blog, but google does not find it back... * <i class="fa  fa-meh-o "></i>
]

---

## What is piping?

When you want to wrangle a large dataframe, you have a few options

1. Nest a lot of functions
1. Create a lot of temporary objects 
  
  


```r
pie_tmp &lt;- dress_with(pie, sauce)
pie_tmp &lt;- dress_with(pie_tmp, oil)
pie_tmp &lt;- dress_with(pie_tmp, cheese)
pie_tmp &lt;- put_in(pie_tmp, oven)
pizza &lt;- take_out(pie_tmp, oven)
```
---

## What is piping?

When you want to wrangle a large dataframe, you have a few options

1. Nest a lot of functions
2. Create a lot of temporary variables
3. Use pipes  
  


```r
pizza &lt;- pie %&gt;% 
  dress_with(sauce) %&gt;% 
  dress_with(oil) %&gt;% 
  dress_with(break(cheese)) %&gt;% 
  put_in(oven) %&gt;%
  take_out(oven)
```
---

## What is piping?

When use the pipe-operator you build a chain of operations:


```r
dataframe %&gt;% 
  function() %&gt;% 
  function(args) %&gt;% 
  function(args)
```
  
&lt;br&gt;  
**Advantages of piping**
- structuring sequences of data operations left-to-right, making it more readable for humans
- avoiding nested function calls,
- minimizing the need for local variables 
- making it easy to add steps anywhere in the sequence of operations
- making it easy to stepwise explore someone elses code
---

## The dataset

Kickstarter data:


  
  

```r
glimpse(kickstarter)
```

```
## Observations: 378,661
## Variables: 13
## $ ID            &lt;int&gt; 1000002330, 1000003930, 1000004038, 1000007540, ...
## $ name          &lt;chr&gt; "The Songs of Adelaide &amp; Abullah", "Greeting Fro...
## $ category      &lt;chr&gt; "Poetry", "Narrative Film", "Narrative Film", "M...
## $ main_category &lt;chr&gt; "Publishing", "Film &amp; Video", "Film &amp; Video", "M...
## $ currency      &lt;chr&gt; "GBP", "USD", "USD", "USD", "USD", "USD", "USD",...
## $ deadline      &lt;dttm&gt; 2015-10-09 11:36:00, 2017-11-01 03:43:57, 2013-...
## $ goal          &lt;dbl&gt; 1000, 30000, 45000, 5000, 19500, 50000, 1000, 25...
## $ launched      &lt;dttm&gt; 2015-08-11 12:12:28, 2017-09-02 04:43:57, 2013-...
## $ pledged       &lt;dbl&gt; 0.00, 2421.00, 220.00, 1.00, 1283.00, 52375.00, ...
## $ state         &lt;chr&gt; "failed", "failed", "failed", "failed", "cancele...
## $ backers       &lt;int&gt; 0, 15, 3, 1, 14, 224, 16, 40, 58, 43, 0, 100, 0,...
## $ country       &lt;chr&gt; "GB", "US", "US", "US", "US", "US", "US", "US", ...
## $ `usd pledged` &lt;dbl&gt; 0.000000, 100.000000, 220.000000, 1.000000, 1283...
```
---

## Getting started



```r
kickstarter
```

```
## # A tibble: 378,661 x 13
##         ID name            catego~ main_~ curr~ deadline              goal
##      &lt;int&gt; &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;dttm&gt;               &lt;dbl&gt;
##  1  1.00e9 The Songs of A~ Poetry  Publi~ GBP   2015-10-09 11:36:00   1000
##  2  1.00e9 Greeting From ~ Narrat~ Film ~ USD   2017-11-01 03:43:57  30000
##  3  1.00e9 Where is Hank?  Narrat~ Film ~ USD   2013-02-26 00:20:50  45000
##  4  1.00e9 ToshiCapital R~ Music   Music  USD   2012-04-16 04:24:11   5000
##  5  1.00e9 Community Film~ Film &amp;~ Film ~ USD   2015-08-29 01:00:00  19500
##  6  1.00e9 Monarch Espres~ Restau~ Food   USD   2016-04-01 13:38:27  50000
##  7  1.00e9 Support Solar ~ Food    Food   USD   2014-12-21 18:30:44   1000
##  8  1.00e9 Chaser Strips.~ Drinks  Food   USD   2016-03-17 19:05:12  25000
##  9  1.00e9 SPIN - Premium~ Produc~ Design USD   2014-05-29 18:14:43 125000
## 10  1.00e8 STUDIO IN THE ~ Docume~ Film ~ USD   2014-08-10 21:55:48  65000
## # ... with 378,651 more rows, and 6 more variables: launched &lt;dttm&gt;,
## #   pledged &lt;dbl&gt;, state &lt;chr&gt;, backers &lt;int&gt;, country &lt;chr&gt;, `usd
## #   pledged` &lt;dbl&gt;
```





```r
kickstarter %&gt;% 
  select(state)
```

```
## # A tibble: 378,661 x 1
##    state     
##    &lt;chr&gt;     
##  1 failed    
##  2 failed    
##  3 failed    
##  4 failed    
##  5 canceled  
##  6 successful
##  7 successful
##  8 failed    
##  9 canceled  
## 10 canceled  
## # ... with 378,651 more rows
```





```r
kickstarter %&gt;%
  group_by(state) %&gt;%
  count()
```

```
## # A tibble: 6 x 2
## # Groups: state [6]
##   state           n
##   &lt;chr&gt;       &lt;int&gt;
## 1 canceled    38779
## 2 failed     197719
## 3 live         2799
## 4 successful 133956
## 5 suspended    1846
## 6 undefined    3562
```





```r
kickstarter %&gt;%
  group_by(state) %&gt;%
  count() %&gt;%
  arrange(desc(n))
```

```
## # A tibble: 6 x 2
## # Groups: state [6]
##   state           n
##   &lt;chr&gt;       &lt;int&gt;
## 1 failed     197719
## 2 successful 133956
## 3 canceled    38779
## 4 undefined    3562
## 5 live         2799
## 6 suspended    1846
```





```r
kickstarter %&gt;%
  group_by(state) %&gt;%
  summarise(n = n(), percent = n/nrow(.)) %&gt;%
  arrange(desc(n))
```

```
## # A tibble: 6 x 3
##   state           n percent
##   &lt;chr&gt;       &lt;int&gt;   &lt;dbl&gt;
## 1 failed     197719 0.522  
## 2 successful 133956 0.354  
## 3 canceled    38779 0.102  
## 4 undefined    3562 0.00941
## 5 live         2799 0.00739
## 6 suspended    1846 0.00488
```
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create();
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {window.dispatchEvent(new Event('resize'));});
(function() {var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler"); if (!r) return; s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }"; d.head.appendChild(s);})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
